@{
    ViewBag.Title = "Home Page";
}

<div class="row justify-content-center">
   @Html.Action("Search", "Search")
</div>
<hr />
<div id="map-container" class="z-depth-1 wow fadeInUp" style="height: 300px"></div>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDrFFeTMMLaOj49X29A_qeVbsMDs97rAfQ&callback=initMap">
</script>
<script>
    var map;
    function initMap() {
        map = new google.maps.Map(document.getElementById("map-container"), {
            zoom: 2,
            center: new google.maps.LatLng(2.8, -187.3),
            mapTypeId: 'terrain'
        });

        $.ajax({
            url: '/Places/GetPlaces',
            type: 'GET',
            success: function (places) {
                for (var i = 0; i < places.length; i++) {
                    var place = places[i];
                    var latLng = new google.maps.LatLng(place.Latitude, place.Longtitude);
                    var marker = new google.maps.Marker({
                        position: latLng,
                        map: map
                    });
                }
            },
            error: function (error) {
                debugger;
                $(that).remove();
                DisplayError(error.statusText);
            }
        });
    }
</script>